<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enbreak | Telling the Time</title>
    <link rel="icon" type="image/x-icon" href="../../../favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../favicon/apple-touch-icon.png">
    <link rel="manifest" href="../../../favicon/site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Rubik:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/style.css">
    <style>
/* Base Activity Styles */
.activity-page { background: #f8f9fa; min-height: 100vh; }
.activity-hero { position: relative; height: 280px; background: url('../../../assets/activities/telling-the-time.jpg') center center/cover no-repeat; background-color: #0a1e42; }
.activity-hero::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(10, 30, 66, 0.4) 0%, rgba(10, 30, 66, 0.85) 100%); }
.activity-hero-content { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 40px; padding-bottom: 60px; height: 100%; display: flex; flex-direction: column; justify-content: center; }
.activity-hero .breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 13px; margin-bottom: 12px; }
.activity-hero .breadcrumb a { color: rgba(255, 255, 255, 0.7); text-decoration: none; transition: color 0.2s; }
.activity-hero .breadcrumb a:hover { color: #ffffff; }
.activity-hero .breadcrumb-separator { color: rgba(255, 255, 255, 0.4); }
.activity-hero .breadcrumb-current { color: #ffffff; }
.activity-hero h1 { font-family: 'Rubik', sans-serif; font-size: 36px; font-weight: 700; color: #ffffff; margin: 0 0 16px 0; }
.activity-hero-badges { display: flex; gap: 10px; flex-wrap: wrap; }
.hero-badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 14px; border-radius: 20px; font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 600; background: rgba(255, 255, 255, 0.15); color: #ffffff; backdrop-filter: blur(8px); }

/* Tabs */
.activity-container { max-width: 1200px; margin: 0 auto; padding: 0 40px 80px; }
.tabs-wrapper { background: #ffffff; border-radius: 0 0 16px 16px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); margin-top: 0; position: relative; z-index: 10; overflow: hidden; }
.tab-nav { display: flex; align-items: center; border-bottom: 1px solid #e5e7eb; background: #fafafa; overflow-x: auto; }
.tab-nav-main { display: flex; flex: 1; }
.tab-btn { display: flex; align-items: center; gap: 8px; padding: 18px 24px; background: none; border: none; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500; color: #6b7280; cursor: pointer; white-space: nowrap; transition: all 0.2s; position: relative; }
.tab-btn:hover { color: #374151; background: #f3f4f6; }
.tab-btn.active { color: #ea580c; background: #ffffff; }
.tab-btn.active::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px; background: #ea580c; }
.tab-content { display: none; padding: 40px 60px; }
.tab-content.active { display: block; }

/* Intro Styles */
.intro-grid { display: grid; grid-template-columns: 1fr auto; gap: 32px; align-items: start; }
.intro-main { display: flex; flex-direction: column; gap: 24px; }
.intro-text { font-family: 'Inter', sans-serif; font-size: 15px; line-height: 1.8; color: #4b5563; }
.intro-text strong { color: #ea580c; }
.intro-sidebar { display: flex; flex-direction: column; gap: 16px; max-width: 380px; }
.info-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; display: flex; gap: 10px; }
.info-card-icon { width: 36px; height: 36px; border-radius: 8px; background: #ffedd5; color: #ea580c; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.info-card-content h4 { font-family: 'Rubik', sans-serif; font-size: 14px; font-weight: 600; color: #374151; margin: 0 0 4px 0; }
.info-card-content p { font-family: 'Inter', sans-serif; font-size: 14px; color: #6b7280; margin: 0; }

/* Exercise Section */
.exercise-section { margin-bottom: 40px; }
.exercise-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
.exercise-number { width: 36px; height: 36px; border-radius: 50%; background: #ea580c; color: #ffffff; font-family: 'Rubik', sans-serif; font-size: 16px; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.exercise-header h3 { font-family: 'Rubik', sans-serif; font-size: 20px; font-weight: 600; color: #1f2937; margin: 0; }

.clock-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 24px;
}

.digital-display {
    background: #111;
    border-radius: 12px;
    padding: 10px 12px;
    display: flex;
    align-items: center;
    gap: 6px;
    width: fit-content;
    margin: 0 auto;
}

.digital-fused-block {
    background: #fff;
    border-radius: 7px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 10px;
    gap: 2px;
}

.digital-fused-block .num {
    font-family: Arial, sans-serif;
    font-weight: bold;
    font-size: 2.2rem;
    color: #111;
    line-height: 1;
    width: 28px;
    text-align: center;
}

.digital-inner-separator {
    width: 1.5px;
    height: 32px;
    background: #ddd;
    border-radius: 99px;
    flex-shrink: 0;
}

.digital-divider {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 12px;
    height: 56px;
}

.digital-divider-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #fff;
    flex-shrink: 0;
}

.digital-ampm-col {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 56px;
    margin-left: 5px;
}

.digital-ampm-badge {
    font-family: Arial, sans-serif;
    font-size: 0.75rem;
    font-weight: bold;
    letter-spacing: 1px;
    text-align: center;
    padding: 4px 9px;
    border-radius: 6px;
    cursor: default;
    background: #fff;
    color: #111;
    white-space: nowrap;
    width: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.clock-border {
    padding: 0;
    border-radius: 50%;
    width: fit-content;
}

.clock-face-wrapper {
    position: relative;
    width: 380px;
    height: 380px;
}

canvas {
    display: block;
    cursor: grab;
    border-radius: 50%;
    width: 100%;
    height: 100%;
}
canvas:active { cursor: grabbing; }

.current-time-btn {
    padding: 8px 16px;
    background: #ea580c;
    border: 1px solid #ea580c;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.2s;
}
.current-time-btn:hover {
    background: #c2410c;
    border-color: #c2410c;
}

.time-preset-btn {
    padding: 8px 16px;
    background: #f3f4f6;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: #374151;
    cursor: pointer;
    transition: border-color 0.2s;
}
.time-preset-btn:hover {
    border-color: #ea580c;
}

.num-input {
    font-family: Arial, sans-serif;
    font-weight: bold;
    font-size: 2.2rem;
    color: #111;
    line-height: 1;
    width: 28px;
    text-align: center;
    border: none;
    background: transparent;
    padding: 0;
    margin: 0;
}
.num-input:focus {
    outline: none;
    background-color: #f0f9ff;
    border-radius: 4px;
}
.digital-ampm-badge {
    cursor: pointer;
}
.digital-ampm-badge:hover {
    background-color: #f3f4f6;
}

.exercise-instructions { font-family: 'Inter', sans-serif; font-size: 15px; color: #6b7280; margin-bottom: 20px; line-height: 1.6; }

/* Interactive Clock Layout */
.preparation-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
    margin-top: 24px;
}

.chat-panel {
    background: #ffffff;
    border-radius: 12px;
    border: 1px solid #e0e4ed;
    box-shadow: 0 2px 8px rgba(13,31,60,0.06);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    max-width: 400px;
    width: 100%;
}

.right-column {
    display: flex;
    flex-direction: column;
    gap: 0;
    align-items: center;
}

.time-display-wrapper {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 24px;
    align-items: center;
}

.chat-header {
    background: #0d1f3c;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.chat-header-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #00d084;
    box-shadow: 0 0 0 2px rgba(0,208,132,0.3);
}

.chat-header-title {
    font-size: 0.8rem;
    font-weight: 600;
    color: rgba(255,255,255,0.85);
    letter-spacing: 0.5px;
}

.chat-body {
    padding: 14px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    background: #ffffff;
}

.bubble {
    max-width: 82%;
    padding: 10px 14px;
    font-size: 0.9rem;
    font-weight: 500;
    line-height: 1.45;
    word-break: break-word;
}

.bubble.outgoing {
    align-self: flex-end;
    background: #0d1f3c;
    color: #ffffff;
    border-radius: 18px 18px 4px 18px;
}

.bubble.incoming {
    align-self: flex-start;
    background: #e8ecf3;
    color: #2c3e5a;
    border-radius: 18px 18px 18px 4px;
}

.bubble.incoming strong {
    color: #e8571a;
    font-weight: 700;
}

.or-divider {
    align-self: flex-start;
    font-size: 0.65rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #8a9bbf;
    padding-left: 4px;
    margin: 1px 0;
}

.timestamp {
    align-self: flex-end;
    font-size: 0.65rem;
    color: #8a9bbf;
    margin-top: -2px;
    padding-right: 2px;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to   { opacity: 1; transform: translateY(0); }
}

.animate {
    animation: fadeIn 0.25s ease forwards;
}

/* Examples Section */
.examples-container {
    margin-top: 24px;
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e2e8f0;
}

.examples-title {
    font-family: 'Rubik', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #475569;
    margin: 0 0 12px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.examples-list {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
}

.example-item {
    display: flex;
    align-items: center;
    gap: 10px;
    background: white;
    padding: 8px 16px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.example-play-btn {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #f1f5f9;
    border: none;
    color: #64748b;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    cursor: pointer;
    transition: all 0.2s;
}

.example-play-btn:hover {
    background: #ea580c;
    color: white;
}

.example-text {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    letter-spacing: 1px;
}

/* Tip Box */
.tip-box {
    background-color: #E0F5F7;
    border: 1px solid #81C7D4;
    border-radius: 0.75rem;
    padding: 1rem;
    margin-top: 24px;
}

.tip-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    color: #3B8A9D;
    font-size: 15px;
}

.tip-content {
    font-family: 'Inter', sans-serif;
    font-size: 0.875rem;
    color: #3B8A9D;
    line-height: 1.6;
}

.tip-content ul {
    margin: 8px 0;
    padding-left: 20px;
    list-style-type: disc;
}

.tip-content li {
    margin-bottom: 4px;
}

/* Navigation Buttons */
.activity-nav { display: flex; justify-content: space-between; align-items: center; padding: 24px 40px; border-top: 1px solid #e5e7eb; background: #fafafa; }
.nav-btn { display: flex; align-items: center; gap: 8px; padding: 12px 24px; border-radius: 10px; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
.nav-btn-back { background: #ffffff; border: 2px solid #e5e7eb; color: #6b7280; }
.nav-btn-back:hover:not(:disabled) { border-color: #d1d5db; color: #374151; }
.nav-btn-next { background: #ea580c; border: 2px solid #ea580c; color: #ffffff; }
.nav-btn-next:hover:not(:disabled) { background: #dc2626; border-color: #dc2626; }
.nav-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.nav-btn-back.hidden { visibility: hidden; }

/* Past & To Section */
.clock-examples-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 32px;
    margin-top: 32px;
}

.clock-example-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
}

.clock-example-header {
    font-family: 'Rubik', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: #1f2937;
    text-align: center;
}

.static-clock-wrapper {
    width: 240px;
    height: 240px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.static-clock-wrapper canvas {
    width: 100%;
    height: 100%;
    display: block;
    cursor: default;
}

.clock-digital {
    font-family: 'Arial', monospace;
    font-size: 24px;
    font-weight: bold;
    color: #111;
    text-align: center;
    margin-top: 8px;
}

.clock-conversational {
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: #374151;
    text-align: center;
    line-height: 1.6;
}

.clock-explanation {
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    color: #6b7280;
    text-align: center;
    line-height: 1.6;
    padding-top: 8px;
    border-top: 1px solid #e5e7eb;
}

@media (max-width: 900px) {
    .intro-grid { grid-template-columns: 1fr; }
    .clock-examples-grid {
        grid-template-columns: 1fr;
    }
    .preparation-grid { grid-template-columns: 1fr; }
    .exercise-header { flex-wrap: wrap; }
}

@media (max-width: 768px) {
    .activity-hero { height: 220px; }
    .activity-hero-content { padding: 24px; }
    .activity-hero h1 { font-size: 28px; }
    .activity-container { padding: 0 16px 60px; }
    .tab-content { padding: 24px; }
}

/* Practice Activity Styles */
.practice-layout {
    display: grid;
    grid-template-columns: 1fr 180px;
    gap: 32px;
    margin-top: 24px;
    align-items: start;
}

.times-column {
    position: sticky;
    top: 20px;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 480px;
}

.draggable-time {
    padding: 12px 16px;
    background: #ffffff;
    border: 2px solid #fed7aa;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #ea580c;
    cursor: grab;
    text-align: center;
    transition: all 0.2s;
    width: 100%;
    box-sizing: border-box;
}

.draggable-time:hover {
    background: #ffedd5;
    border-color: #ea580c;
    color: #ea580c;
    box-shadow: 0 2px 8px rgba(234, 88, 12, 0.15);
}

.draggable-time.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

.sentences-column {
    display: flex;
    flex-direction: column;
    gap: 16px;
    background: transparent;
    border: none;
    padding: 0;
}

.sentence-item {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 14px 16px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: #374151;
    line-height: 1.7;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    position: relative;
}

.time-gap {
    display: inline-flex;
    min-width: 100px;
    min-height: 30px;
    padding: 4px 8px;
    border: 2px dashed #e5e7eb;
    border-radius: 6px;
    background: #ffffff;
    vertical-align: middle;
    align-items: center;
    justify-content: center;
    margin: 0 4px;
    transition: all 0.2s;
}

.time-gap.drag-over {
    border-color: #ea580c;
    background: #ffedd5;
}

.time-gap.correct {
    border-color: #16a34a;
    background: #dcfce7;
}

.time-gap.incorrect {
    border-color: #dc2626;
    background: #fee2e2;
}

.dropped-time {
    font-weight: 700;
    color: #ea580c;
    cursor: grab;
}

.dropped-time.correct-text { color: #166534; }
.dropped-time.incorrect-text { color: #991b1b; }

.check-answers-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 18px;
    background: #0a1e42;
    border: none;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.2s;
    margin-top: 20px;
}

.check-answers-btn:hover {
    background: #1e3a5f;
}

.check-answers-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #9ca3af;
}

.check-answers-btn.retry-btn {
    background: #ea580c;
}

.check-answers-btn.retry-btn:hover {
    background: #c2410c;
}

@media (max-width: 768px) {
    .practice-layout {
        grid-template-columns: 1fr;
    }
    .times-column {
        position: static;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
    }
    .draggable-time {
        width: auto;
        min-width: 80px;
    }
}

/* Feedback Popup */
.feedback-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.feedback-popup-overlay.show {
    opacity: 1;
    visibility: visible;
}

.feedback-popup {
    background: #ffffff;
    border-radius: 16px;
    padding: 32px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.feedback-popup-overlay.show .feedback-popup {
    transform: scale(1);
}

.feedback-popup-icon {
    font-size: 40px;
    margin-bottom: 16px;
}

.feedback-popup-icon.success { color: #16a34a; }
.feedback-popup-icon.partial { color: #ea580c; }
.feedback-popup-icon.good { color: #2563eb; }

.feedback-popup h3 {
    font-family: 'Rubik', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: #1f2937;
    margin: 0 0 12px 0;
}

.feedback-popup p {
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: #6b7280;
    margin: 0 0 24px 0;
}

.feedback-popup-close {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 32px;
    background: #0a1e42;
    border: none;
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.2s;
}

.feedback-popup-close:hover {
    background: #1e3a5f;
}

/* Listening Practice Styles */
.listening-list {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    margin-top: 24px;
}

@media (min-width: 768px) {
    .listening-list {
        grid-template-columns: 1fr 1fr;
    }
}

.listening-item {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 16px;
}

.listening-audio-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    color: #4b5563;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
}

.listening-audio-btn:hover {
    background: #ea580c;
    color: white;
    border-color: #ea580c;
}

.listening-audio-btn.playing {
    background: #ea580c;
    color: white;
    border-color: #ea580c;
}

.listening-input-wrapper {
    flex: 1;
}

.listening-input {
    width: 100%;
    padding: 10px 14px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: #374151;
    transition: all 0.2s;
}

.listening-input:focus {
    outline: none;
    border-color: #ea580c;
    box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.1);
}

.listening-input.correct {
    border-color: #16a34a;
    background: #dcfce7;
    color: #166534;
}

.listening-input.incorrect {
    border-color: #dc2626;
    background: #fee2e2;
    color: #991b1b;
}

/* Transcript Styles */
.warning-box {
    background: #fef9c3;
    border: 1px solid #fde047;
    border-radius: 10px;
    padding: 12px 16px;
    margin-bottom: 32px;
    display: flex;
    gap: 12px;
    align-items: center;
}

.warning-box i {
    color: #ca8a04;
    font-size: 16px;
}

.warning-box-content h4 {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #854d0e;
    margin: 0;
    display: inline;
}

.warning-box-content p {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #a16207;
    margin: 0;
    display: inline;
}

.transcript-container {
    max-width: 800px;
    margin: 0 auto;
}

.transcript-header {
    text-align: center;
    margin-bottom: 32px;
}

.transcript-header h3 {
    font-family: 'Rubik', sans-serif;
    font-size: 24px;
    font-weight: 600;
    color: #1f2937;
    margin: 0 0 8px 0;
}

.transcript-header p {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #6b7280;
}

/* Sentence Completion (Post-Listening) */
.sentence-completion-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.sentence-dropdown {
    display: inline-block;
    width: auto;
    min-width: 180px;
    padding: 6px 12px;
    margin: 0 8px;
    border: 1px solid #e5e7eb;
    border-radius: 6px;
    background: #ffffff;
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #374151;
    cursor: pointer;
    transition: all 0.2s;
}

.sentence-dropdown:focus {
    outline: none;
    border-color: #ea580c;
}

.sentence-dropdown.correct {
    border-color: #16a34a;
    background: #f0fdf4;
    color: #16a34a;
    font-weight: 600;
}

.sentence-dropdown.incorrect {
    border-color: #dc2626;
    background: #fef2f2;
    color: #dc2626;
    font-weight: 600;
}

/* Completion Box */
.completion-box {
    background: linear-gradient(135deg, #dcfce7 0%, #d1fae5 100%);
    border: 1px solid #86efac;
    border-radius: 12px;
    padding: 24px;
    margin-top: 32px;
}

.completion-box h4 {
    font-family: 'Rubik', sans-serif;
    font-size: 18px;
    font-weight: 600;
    color: #166534;
    margin: 0 0 12px 0;
}

.completion-box p {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #166534;
    margin: 0 0 16px 0;
}

.completion-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.completion-list li {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    color: #166534;
    display: flex;
    align-items: center;
    gap: 8px;
}

.completion-list li i {
    color: #16a34a;
}

.transcript-box {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 32px;
}

.transcript-text {
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    line-height: 1.8;
    color: #374151;
    white-space: pre-line;
}
    </style>
</head>
<body>

    <div id="header-placeholder"></div>

    <main class="activity-page">
        <!-- Hero Section -->
        <section class="activity-hero">
            <div class="activity-hero-content">
                <nav class="breadcrumb">
                    <a href="/">Inicio</a>
                    <span class="breadcrumb-separator">›</span>
                    <a href="../actividades.html">Actividades</a>
                    <span class="breadcrumb-separator">›</span>
                    <span class="breadcrumb-current">Telling the Time</span>
                </nav>
                <h1>Telling the Time</h1>
                <div class="activity-hero-badges">
                    <span class="hero-badge"><i class="fa-solid fa-headphones"></i> Listening</span>
                    <span class="hero-badge"><i class="fa-solid fa-layer-group"></i> Level A2</span>
                    <span class="hero-badge"><i class="fa-regular fa-clock"></i> 15 min</span>
                </div>
            </div>
        </section>

        <!-- Activity Content -->
        <section class="activity-container">
            <div class="tabs-wrapper">
                <!-- Tab Navigation -->
                <nav class="tab-nav">
                    <div class="tab-nav-main">
                        <button class="tab-btn active" data-tab="introduction">Introduction</button>
                        <button class="tab-btn" data-tab="pre-listening">Pre-Listening</button>
                        <button class="tab-btn" data-tab="listening">Listening</button>
                        <button class="tab-btn" data-tab="post-listening">Post-Listening</button>
                        <button class="tab-btn" data-tab="transcript">View Transcript</button>
                    </div>
                </nav>

                <!-- Introduction Tab -->
                <div class="tab-content active" id="introduction">
                    <div class="intro-grid">
                        <div class="intro-main">
                            <p class="intro-text">
                                Telling the time is a <strong>fundamental skill</strong> for navigating daily life in an English-speaking environment. From catching a train to meeting a friend, understanding <strong>time expressions</strong> ensures you are always in the right place at the right moment.
                            </p>
                            <p class="intro-text">
                                In this lesson, you will learn to distinguish between the two main ways of expressing time: the <strong>digital format</strong> often used in schedules, and the <strong>conversational style</strong> used in everyday speech. Mastering both will help you communicate more naturally and avoid confusion.
                            </p>
                            <p class="intro-text">
                                Through <strong>listening practice</strong> and <strong>interactive examples</strong>, you will build the confidence to recognize time expressions quickly and accurately in real-world situations.
                            </p>
                        </div>
                        <div class="intro-sidebar">
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-bullseye"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Learning Objective</h4>
                                    <p>You will be able to recognize and understand time expressions in both formal and conversational English contexts.</p>
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-headphones"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Skill Focus</h4>
                                    <p>Listening Comprehension (A2 Level)</p>
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Source</h4>
                                    <p>Enbreak Original Content</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pre-Listening Tab -->
                <div class="tab-content" id="pre-listening">
                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">1</span>
                            <h3>Interactive Clock</h3>
                        </div>
                        <p class="exercise-instructions">Drag the hour or minute hand to set the time. See below the different ways to tell the time in English.</p>

                        <div class="preparation-grid" id="clockContainer">
                            <!-- Left: Analog Clock -->
                            <div class="clock-container">
                                <div class="clock-border">
                                    <div class="clock-face-wrapper">
                                        <canvas id="clockCanvas" width="480" height="480"></canvas>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 10px; margin-top: 16px;">
                                    <button id="btn-noon" class="time-preset-btn">
                                        <i class="fa-solid fa-sun"></i> Noon
                                    </button>
                                    <button id="btn-midnight" class="time-preset-btn">
                                        <i class="fa-solid fa-moon"></i> Midnight
                                    </button>
                                    <button id="btn-current-time" class="current-time-btn">Current Time</button>
                                </div>
                            </div>

                            <!-- Right: Digital + Chat -->
                            <div class="time-display-wrapper">
                                <!-- Digital Clock -->
                                <div class="digital-display" id="digitalDisplay">
                                    <div class="digital-fused-block">
                                        <input type="text" class="num-input" id="h1" maxlength="1" value="1" autocomplete="off">
                                        <div class="digital-inner-separator"></div>
                                        <input type="text" class="num-input" id="h2" maxlength="1" value="2" autocomplete="off">
                                    </div>
                                    <div class="digital-divider">
                                        <div class="digital-divider-dot"></div>
                                        <div class="digital-divider-dot"></div>
                                    </div>
                                    <div class="digital-fused-block">
                                        <input type="text" class="num-input" id="m1" maxlength="1" value="0" autocomplete="off">
                                        <div class="digital-inner-separator"></div>
                                        <input type="text" class="num-input" id="m2" maxlength="1" value="0" autocomplete="off">
                                    </div>
                                    <div class="digital-ampm-col">
                                        <span class="digital-ampm-badge" id="badge-ampm">AM</span>
                                    </div>
                                </div>

                                <!-- Chat Panel -->
                                <div class="chat-panel">
                                    <div class="chat-header">
                                        <div class="chat-header-dot"></div>
                                        <span class="chat-header-title">English Break</span>
                                    </div>
                                    <div class="chat-body">
                                        <div class="bubble outgoing">What time is it?</div>
                                        <div class="timestamp">You</div>
                                        <div class="bubble incoming animate" id="line1">It's <strong>noon</strong>.</div>
                                        <div class="or-divider">or</div>
                                        <div class="bubble incoming animate" id="line2">It's <strong>twelve o'clock</strong>.</div>
                                        <div class="bubble outgoing">Thank you!</div>
                                        <div class="timestamp">You</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="examples-container">
                            <h4 class="examples-title">Examples</h4>
                            <div class="examples-list">
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('10.45')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">It's 10:45</span>
                                </div>
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('12.20')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">It's 12:20</span>
                                </div>
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('07.05')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">It's 7:05</span>
                                </div>
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('03.30')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">It's 3:30</span>
                                </div>
                            </div>
                        </div>

                        <div class="tip-box">
                            <div class="tip-header">
                                <i data-lucide="info" style="width: 20px; height: 20px;"></i> Tip
                            </div>
                            <div class="tip-content">
                                <ul>
                                    <li>Use <strong>"It's"</strong> to say what time it is. Example: <strong>"It's eight o'clock"</strong>.</li>
                                    <li>Use <strong>"at"</strong> for plans or scheduled events. Example: <strong>"My class starts at 2:30"</strong>.</li>
                                </ul> 
                            </div>
                        </div>
                    </div>
                
                <!-- Section 2: Past & To -->
                <div class="exercise-section">
                    <div class="exercise-header">
                        <span class="exercise-number">2</span>
                        <h3>Using 'Past' and 'To'</h3>
                    </div>
                    <p class="exercise-instructions">Learn the difference between "past" and "to" when telling time.</p>
                    
                    <div class="clock-examples-grid">
                        <!-- PAST -->
                        <div class="clock-example-card">
                            <div class="clock-example-header">PAST</div>
                            <div class="static-clock-wrapper">
                                <canvas id="clockPast" width="240" height="240"></canvas>
                            </div>
                            <div class="clock-digital">6:25</div>
                            <div class="clock-conversational">"It's twenty-five <strong>past</strong> six"</div>
                            <div class="clock-explanation">Use 'past' before the 30-minute mark</div>
                        </div>

                        <!-- HALF PAST -->
                        <div class="clock-example-card">
                            <div class="clock-example-header">HALF PAST</div>
                            <div class="static-clock-wrapper">
                                <canvas id="clockHalfPast" width="240" height="240"></canvas>
                            </div>
                            <div class="clock-digital">6:30</div>
                            <div class="clock-conversational">"It's <strong>half past</strong> six"</div>
                            <div class="clock-explanation">Use 'half past' at exactly 30 minutes</div>
                        </div>
                        <!-- TO -->
                        <div class="clock-example-card">
                            <div class="clock-example-header">TO</div>
                            <div class="static-clock-wrapper">
                                <canvas id="clockTo" width="240" height="240"></canvas>
                            </div>
                            <div class="clock-digital">6:35</div>
                            <div class="clock-conversational">"It's twenty-five <strong>to</strong> seven"</div>
                            <div class="clock-explanation">Use 'to' after the 30-minute mark</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <div class="tip-header">
                            <i data-lucide="info" style="width: 20px; height: 20px;"></i> Tip
                        </div>
                        <div class="tip-content">
                            <p>
                                The word <strong>'quarter'</strong> indicates 15 minutes. Say <strong>'a quarter past'</strong> for times like 3:15 and <strong>'a quarter to'</strong> for times like 3:45.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="exercise-section">
                        <div class="exercise-header">
                        <span class="exercise-number">3</span>
                            <h3>Recognizing Time</h3>
                        </div>
                        <p class="exercise-instructions">Listen carefully and write the time that you hear. Use numbers only</p>

                        <div class="listening-list" id="listening-practice-list">
                            <div class="listening-item" data-answer="02:30">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('2.30')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="listening-item" data-answer="11:00">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('11.00')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="listening-item" data-answer="06:02">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('6.02')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="listening-item" data-answer="07:20">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('7.20')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="listening-item" data-answer="08:45">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('8.45')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                            <div class="listening-item" data-answer="04:38">
                                <button class="listening-audio-btn" onclick="playPracticeAudio('4.38')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                                <div class="listening-input-wrapper">
                                    <input type="text" class="listening-input" placeholder="00:00" autocomplete="off" inputmode="numeric">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; margin-top: 24px;">
                            <button class="check-answers-btn" id="checkListeningBtn"><i class="fa-solid fa-check"></i> Check answers</button>
                            <button class="check-answers-btn retry-btn" id="retryListeningBtn" disabled><i class="fa-solid fa-rotate-right"></i> Try again</button>
                        </div>
                    </div>
                </div>

                <!-- Listening Tab -->
                <div class="tab-content" id="listening">
                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">1</span>
                            <h3>A Typical Day</h3>
                        </div>
                        <p class="exercise-instructions">Listen to the audio and drag the correct times into the sentences.</p>
                        
                        <div style="margin-bottom: 24px; display: flex; justify-content: center;">
                            <audio controls style="width: 100%; max-width: 400px;">
                                <source src="../../../assets/activities/telling-the-time/CLARA.mp3" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>

                        <div class="practice-layout">
                            <!-- Sentences (Left) -->
                            <div class="sentences-column">
                                <div class="sentence-item"><strong>1.</strong> Clara usually wakes up at <div class="time-gap" data-correct="7:15"></div> in the morning.</div>
                                <div class="sentence-item"><strong>2.</strong> She leaves her house for work at <div class="time-gap" data-correct="8:00"></div>.</div>
                                <div class="sentence-item"><strong>3.</strong> Clara has lunch at <div class="time-gap" data-correct="12:45"></div>.</div>
                                <div class="sentence-item"><strong>4.</strong> She finishes her workday at <div class="time-gap" data-correct="5:00"></div>.</div>
                                <div class="sentence-item"><strong>5.</strong> Clara starts cooking dinner at <div class="time-gap" data-correct="6:15"></div>.</div>
                                <div class="sentence-item"><strong>6.</strong> She goes to bed at <div class="time-gap" data-correct="10:00"></div>.</div>
                            </div>

                            <!-- Draggable Times (Right) -->
                            <div class="times-column" id="timesContainer">
                                <div class="draggable-time" draggable="true" data-time="9:30">9:30</div>
                                <div class="draggable-time" draggable="true" data-time="7:15">7:15</div>
                                <div class="draggable-time" draggable="true" data-time="5:00">5:00</div>
                                <div class="draggable-time" draggable="true" data-time="12:45">12:45</div>
                                <div class="draggable-time" draggable="true" data-time="6:45">6:45</div>
                                <div class="draggable-time" draggable="true" data-time="8:00">8:00</div>
                                <div class="draggable-time" draggable="true" data-time="10:00">10:00</div>
                                <div class="draggable-time" draggable="true" data-time="6:15">6:15</div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px;">
                            <button class="check-answers-btn" id="checkPracticeBtn"><i class="fa-solid fa-check"></i> Check answers</button>
                            <button class="check-answers-btn retry-btn" id="retryPracticeBtn" disabled><i class="fa-solid fa-rotate-right"></i> Try again</button>
                        </div>
                        <div id="practiceFeedback" style="margin-top: 16px; font-family: 'Inter', sans-serif; font-size: 14px;"></div>
                    </div>
                </div>

                <!-- Post-Listening Tab -->
                <div class="tab-content" id="post-listening">
                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">1</span>
                            <h3>Time Conversion Challenge</h3>
                        </div>
                        <p class="exercise-instructions">Select the correct conversational expression for each digital time.</p>
                        
                        <div class="sentence-completion-list" id="post-listening-list">
                            <div class="sentence-item" data-correct="b">
                                <p class="sentence-text"><strong>1. 04:15</strong> is
                                    <select class="sentence-dropdown">
                                        <option value="">Select...</option>
                                        <option value="a">fifteen to four</option>
                                        <option value="b">a quarter past four</option>
                                        <option value="c">four fifteen o'clock</option>
                                    </select>
                                </p>
                            </div>
                            <div class="sentence-item" data-correct="a">
                                <p class="sentence-text"><strong>2. 09:30</strong> is
                                    <select class="sentence-dropdown">
                                        <option value="">Select...</option>
                                        <option value="a">half past nine</option>
                                        <option value="b">nine thirty past</option>
                                        <option value="c">half to ten</option>
                                    </select>
                                </p>
                            </div>
                            <div class="sentence-item" data-correct="b">
                                <p class="sentence-text"><strong>3. 02:45</strong> is
                                    <select class="sentence-dropdown">
                                        <option value="">Select...</option>
                                        <option value="a">a quarter past two</option>
                                        <option value="b">a quarter to three</option>
                                        <option value="c">two forty-five past</option>
                                    </select>
                                </p>
                            </div>
                            <div class="sentence-item" data-correct="b">
                                <p class="sentence-text"><strong>4. 11:55</strong> is
                                    <select class="sentence-dropdown">
                                        <option value="">Select...</option>
                                        <option value="a">fifty-five past eleven</option>
                                        <option value="b">five to twelve</option>
                                        <option value="c">five past twelve</option>
                                    </select>
                                </p>
                            </div>
                            <div class="sentence-item" data-correct="a">
                                <p class="sentence-text"><strong>5. 06:00</strong> is
                                    <select class="sentence-dropdown">
                                        <option value="">Select...</option>
                                        <option value="a">six o'clock</option>
                                        <option value="b">six zero zero</option>
                                        <option value="c">six past</option>
                                    </select>
                                </p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; align-items: center; margin-top: 24px;">
                            <button class="check-answers-btn" id="checkPostListeningBtn">
                                <i class="fa-solid fa-circle-check"></i> Check answers
                            </button>
                            <button class="check-answers-btn retry-btn" id="retryPostListeningBtn" disabled>
                                <i class="fa-solid fa-rotate-right"></i> Try again
                            </button>
                        </div>
                    </div>

                    <div class="completion-box">
                        <h4><i class="fa-solid fa-party-horn"></i> Great Job!</h4>
                        <p>You've completed the "Telling the Time" activity. You've practiced:</p>
                        <ul class="completion-list">
                            <li><i class="fa-solid fa-check"></i> Recognizing digital and analog time formats</li>
                            <li><i class="fa-solid fa-check"></i> Using "past" and "to" correctly</li>
                            <li><i class="fa-solid fa-check"></i> Listening to daily routines and schedules</li>
                            <li><i class="fa-solid fa-check"></i> Converting between digital and conversational time</li>
                        </ul>
                    </div>
                </div>

                <!-- Transcript Tab -->
                <div class="tab-content" id="transcript">
                    <div class="warning-box">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                        <div class="warning-box-content">
                            <h4>Before you continue:</h4> <p>Try to complete the listening exercises first. Only use the transcript if you really need extra help.</p>
                        </div>
                    </div>
                    <div class="transcript-container">
                        <div class="transcript-header">
                            <h3>A Typical Day</h3>
                            <p>Clara</p>
                        </div>
                        <div class="transcript-box">
                            <p class="transcript-text">Hi there! My name is Clara, and I'd like to tell you about my typical day.

I usually wake up at seven fifteen in the morning and start with a cup of coffee. Then, at eight o'clock, I leave my house to go to work. My first meeting begins at half past nine, and I usually stay at the office until noon.

I have lunch at twelve forty-five, and after that, I sometimes go for a short walk. In the afternoon, I work on my projects until half past three, then I like to take a quick coffee break. My workday ends at five o'clock, and I usually get home around half past five.

In the evening, I like to relax. I usually start cooking dinner at quarter past six, and I eat around quarter to seven. After dinner, I sometimes watch a TV show, and I try to go to bed at ten o'clock at night to get a good night's sleep.

That's a typical day for me, what about you?</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="activity-nav">
                    <button class="nav-btn nav-btn-back" id="btn-back" disabled>
                        <i class="fa-solid fa-arrow-left"></i> Back
                    </button>
                    <button class="nav-btn nav-btn-next" id="btn-next">
                        Next <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../../../js/layout.js"></script>
    <script src="../../../js/script.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();

        // â”€â”€ Tab logic â”€â”€
        const tabBtns     = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const btnBack     = document.getElementById('btn-back');
        const btnNext     = document.getElementById('btn-next');
        const tabs        = ['introduction', 'pre-listening', 'listening', 'post-listening', 'transcript'];
        let currentTabIndex = 0;

        function switchTab(tabId, scrollToTop = false) {
            tabBtns.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));

            const activeBtn = document.querySelector(`[data-tab="${tabId}"]`);
            const activeContent = document.getElementById(tabId);

            if (activeBtn) activeBtn.classList.add('active');
            if (activeContent) activeContent.classList.add('active');

            currentTabIndex = tabs.indexOf(tabId);
            updateNavButtons();
            if (scrollToTop) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function updateNavButtons() {
            btnBack.disabled = currentTabIndex === 0;
            if (currentTabIndex === 0) {
                btnBack.classList.add('hidden');
            } else {
                btnBack.classList.remove('hidden');
            }

            if (currentTabIndex === tabs.length - 1) {
                btnNext.innerHTML = 'Back to Activities';
            } else {
                btnNext.innerHTML = 'Next <i class="fa-solid fa-arrow-right"></i>';
            }
        }

        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                switchTab(tabId, false);
            });
        });
        btnBack.addEventListener('click', function() {
            if (currentTabIndex > 0) {
                switchTab(tabs[currentTabIndex - 1], true);
            }
        });
        btnNext.addEventListener('click', function() {
            if (currentTabIndex === tabs.length - 1) {
                window.location.href = '../actividades.html';
                return;
            }
            if (currentTabIndex < tabs.length - 1) {
                switchTab(tabs[currentTabIndex + 1], true);
            }
        });
        updateNavButtons();

        // â”€â”€ Clock logic â”€â”€
        const canvas = document.getElementById('clockCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const W = canvas.width, H = canvas.height;
        const cx = W / 2, cy = H / 2;
        const R = W / 2 - 1;

        let hours = 12, minutes = 0;
        let dragging = null;
        let liveMode  = false;

        function toRad(deg) { return deg * Math.PI / 180; }

        function getPointerAngle(e) {
            const rect = canvas.getBoundingClientRect();
            const sx = W / rect.width, sy = H / rect.height;
            let px, py;
            if (e.touches) {
                px = (e.touches[0].clientX - rect.left) * sx;
                py = (e.touches[0].clientY - rect.top)  * sy;
            } else {
                px = (e.clientX - rect.left) * sx;
                py = (e.clientY - rect.top)  * sy;
            }
            return Math.atan2(px - cx, cy - py);
        }

        function normalizeAngle(a) {
            return ((a % (2 * Math.PI)) + 2 * Math.PI) % (2 * Math.PI);
        }

        function getHourAngle()   { return toRad((hours % 12) * 30 + minutes * 0.5); }
        function getMinuteAngle() { return toRad(minutes * 6); }

        function whichHand(e) {
            const rect = canvas.getBoundingClientRect();
            const sx = W / rect.width, sy = H / rect.height;
            let px, py;
            if (e.touches) {
                px = (e.touches[0].clientX - rect.left) * sx - cx;
                py = (e.touches[0].clientY - rect.top)  * sy - cy;
            } else {
                px = (e.clientX - rect.left) * sx - cx;
                py = (e.clientY - rect.top)  * sy - cy;
            }
            const dist    = Math.hypot(px, py);
            const hourLen = R * 0.52;

            function distToHand(angle, len) {
                const hx = Math.sin(angle) * len;
                const hy = -Math.cos(angle) * len;
                const t  = Math.max(0, Math.min(1, (px * hx + py * hy) / (len * len)));
                return Math.hypot(px - hx * t, py - hy * t);
            }

            const dH = distToHand(getHourAngle(),   R * 0.52);
            const dM = distToHand(getMinuteAngle(), R * 0.72);
            if (Math.abs(dH - dM) < 8) return dist > hourLen * 0.8 ? 'minute' : 'hour';
            return dH < dM ? 'hour' : 'minute';
        }

        function draw() {
            ctx.clearRect(0, 0, W, H);

            // White face
            ctx.beginPath();
            ctx.arc(cx, cy, R, 0, 2 * Math.PI);
            ctx.fillStyle = '#ffffff';
            ctx.fill();

            // Black border ring
            const borderThickness = 16;
            ctx.beginPath();
            ctx.arc(cx, cy, R, 0, 2 * Math.PI);
            ctx.arc(cx, cy, R - borderThickness, 0, 2 * Math.PI, true);
            ctx.fillStyle = '#111';
            ctx.fill('evenodd');

            // Tick marks
            for (let i = 0; i < 60; i++) {
                const angle  = toRad(i * 6);
                const isHour = i % 5 === 0;
                const outer  = R - borderThickness - 2;
                const inner  = isHour ? R - borderThickness - 18 : R - borderThickness - 10;
                ctx.beginPath();
                ctx.moveTo(cx + Math.sin(angle) * outer, cy - Math.cos(angle) * outer);
                ctx.lineTo(cx + Math.sin(angle) * inner, cy - Math.cos(angle) * inner);
                ctx.strokeStyle = '#111';
                ctx.lineWidth   = isHour ? 3 : 1.5;
                ctx.stroke();
            }

            // Hour numbers
            ctx.font         = 'bold 34px Arial';
            ctx.fillStyle    = '#111';
            ctx.textAlign    = 'center';
            ctx.textBaseline = 'middle';
            const hourR = R * 0.78;
            for (let i = 1; i <= 12; i++) {
                const angle = toRad(i * 30);
                ctx.fillText(String(i), cx + Math.sin(angle) * hourR, cy - Math.cos(angle) * hourR);
            }

            // Minute hand
            drawHand(getMinuteAngle(), R * 0.72, 7,  '#111', R * 0.12);
            // Hour hand
            drawHand(getHourAngle(),   R * 0.52, 11, '#111', R * 0.10);

            // Center cap
            ctx.beginPath();
            ctx.arc(cx, cy, 11, 0, 2 * Math.PI);
            ctx.fillStyle = '#111';
            ctx.fill();
            ctx.beginPath();
            ctx.arc(cx, cy, 5, 0, 2 * Math.PI);
            ctx.fillStyle = '#ea580c';
            ctx.fill();
        }

        function drawHand(angle, length, width, color, tail) {
            ctx.save();
            ctx.translate(cx, cy);
            ctx.rotate(angle);
            ctx.lineCap     = 'round';
            ctx.strokeStyle = color;
            ctx.lineWidth   = width;
            ctx.beginPath();
            ctx.moveTo(0,  tail);
            ctx.lineTo(0, -length);
            ctx.stroke();
            ctx.restore();
        }

        function updateDigital() {
            const h  = hours % 12 || 12;
            const m  = Math.floor(minutes);
            document.getElementById('h1').value = Math.floor(h / 10);
            document.getElementById('h2').value = h % 10;
            document.getElementById('m1').value = Math.floor(m / 10);
            document.getElementById('m2').value = m % 10;
            document.getElementById('badge-ampm').textContent = hours >= 12 ? 'PM' : 'AM';
            updateChat(hours, m);
        }

        // â”€â”€ Spoken time (chat bubbles) â”€â”€
        const oneWords = ['','one','two','three','four','five','six','seven','eight','nine',
                          'ten','eleven','twelve','thirteen','fourteen','fifteen',
                          'sixteen','seventeen','eighteen','nineteen'];
        const tensWords = ['','','twenty','thirty','forty','fifty'];

        function numWord(n) {
            if (n === 0) return 'zero';
            if (n < 20)  return oneWords[n];
            if (n % 10 === 0) return tensWords[Math.floor(n / 10)];
            return tensWords[Math.floor(n / 10)] + '-' + oneWords[n % 10];
        }

        function updateChat(fullHour, m) {
            const h12   = fullHour % 12 || 12;
            const hWord = numWord(h12);
            const mWord = numWord(m);
            let line1, line2;

            if (m === 0) {
                if (fullHour === 0) { // 12:00 AM
                    line1 = `It's <strong>twelve o'clock</strong>.`;
                    line2 = `It's <strong>midnight</strong>.`;
                } else if (fullHour === 12) { // 12:00 PM
                    line1 = `It's <strong>twelve o'clock</strong>.`;
                    line2 = `It's <strong>noon</strong>.`;
                } else {
                    line1 = `It's <strong>${hWord} ${fullHour < 12 ? 'a.m' : 'p.m'}</strong>.`;
                    line2 = `It's <strong>${hWord} o'clock</strong>.`;
                }
            } else if (m === 15) {
                line1 = `It's <strong>${hWord} ${mWord}</strong>.`;
                line2 = `It's <strong>a quarter past ${hWord}</strong>.`;
            } else if (m === 30) {
                line1 = `It's <strong>${hWord} ${mWord}</strong>.`;
                line2 = `It's <strong>half past ${hWord}</strong>.`;
            } else if (m === 45) {
                const nW = numWord((h12 % 12) + 1 > 12 ? 1 : (h12 % 12) + 1);
                line1 = `It's <strong>${hWord} ${mWord}</strong>.`;
                line2 = `It's <strong>a quarter to ${nW}</strong>.`;
            } else if (m < 30) {
                const ohWord = m < 10 ? `oh ${mWord}` : mWord;
                line1 = `It's <strong>${hWord} ${ohWord}</strong>.`;
                line2  = `It's <strong>${mWord} past ${hWord}</strong>.`;
            } else {
                const rem = 60 - m;
                const nW  = numWord((h12 % 12) + 1 > 12 ? 1 : (h12 % 12) + 1);
                line1 = `It's <strong>${hWord} ${mWord}</strong>.`;
                line2  = `It's <strong>${numWord(rem)} to ${nW}</strong>.`;
            }

            const el1 = document.getElementById('line1');
            const el2 = document.getElementById('line2');
            if (!el1 || !el2) return;
            [el1, el2].forEach(el => {
                el.classList.remove('animate');
                void el.offsetWidth;
                el.classList.add('animate');
            });
            el1.innerHTML = line1;
            el2.innerHTML = line2;
        }

        // â”€â”€ Drag events â”€â”€
        canvas.addEventListener('mousedown', startDrag);
        canvas.addEventListener('touchstart', startDrag, { passive: false });
        window.addEventListener('mousemove', onDrag);
        window.addEventListener('touchmove', onDrag, { passive: false });
        window.addEventListener('mouseup',   stopDrag);
        window.addEventListener('touchend',  stopDrag);

        function startDrag(e) {
            e.preventDefault();
            liveMode = false;
            dragging = whichHand(e);
            canvas.style.cursor = 'grabbing';
        }

        function onDrag(e) {
            if (!dragging) return;
            e.preventDefault();
            const norm = normalizeAngle(getPointerAngle(e));

            if (dragging === 'minute') {
                const prev = minutes;
                minutes = norm / (2 * Math.PI) * 60;
                if (prev > 50 && minutes < 10) hours = (hours + 1) % 24;
                if (prev < 10 && minutes > 50) hours = (hours - 1 + 24) % 24;
            } else {
                const prev   = (hours % 12) + minutes / 60;
                const newH12 = norm / (2 * Math.PI) * 12;
                const offset = hours >= 12 ? 12 : 0;
                if      (prev > 11 && newH12 < 1)  hours = (Math.floor(newH12) + offset + 12) % 24;
                else if (prev < 1  && newH12 > 11) hours = (Math.floor(newH12) + offset - 12 + 24) % 24;
                else                               hours  = Math.floor(newH12) + offset;
                minutes = (newH12 % 1) * 60;
            }
            draw();
            updateDigital();
        }

        function stopDrag() {
            dragging = null;
            canvas.style.cursor = 'grab';
        }

        function tick() {
            if (liveMode) {
                const now = new Date();
                hours   = now.getHours();
                minutes = now.getMinutes();
                draw();
                updateDigital();
            }
            requestAnimationFrame(tick);
        }

        draw();
        updateDigital();
        tick();

        // Current Time Button
        document.getElementById('btn-current-time').addEventListener('click', () => {
            liveMode = false;
            const now = new Date();
            hours = now.getHours();
            minutes = now.getMinutes();
            draw();
            updateDigital();
        });

        // Noon Button
        document.getElementById('btn-noon').addEventListener('click', () => {
            liveMode = false;
            hours = 12;
            minutes = 0;
            draw();
            updateDigital();
        });

        // Midnight Button
        document.getElementById('btn-midnight').addEventListener('click', () => {
            liveMode = false;
            hours = 0;
            minutes = 0;
            draw();
            updateDigital();
        });

        // Digital Clock Inputs
        let previousValue = '';
        const inputs = ['h1', 'h2', 'm1', 'm2'];
        inputs.forEach(id => {
            const el = document.getElementById(id);
            el.addEventListener('focus', () => {
                liveMode = false;
                previousValue = el.value;
                el.value = '';
            });
            el.addEventListener('blur', () => {
                if (el.value === '') {
                    el.value = previousValue;
                }
            });
            el.addEventListener('input', (e) => handleInput(e, id));
        });

        document.getElementById('badge-ampm').addEventListener('click', () => {
            hours = (hours + 12) % 24;
            draw();
            updateDigital();
        });

        function handleInput(e, type) {
            const val = e.target.value;
            if (!/^\d*$/.test(val)) {
                e.target.value = '';
                return;
            }
            if (val === '') return;

            const digit = parseInt(val);
            
            // Validation
            if (type === 'h1') {
                if (digit > 1) { e.target.value = ''; return; }
            } else if (type === 'h2') {
                const h1 = parseInt(document.getElementById('h1').value) || 0;
                if (h1 === 1 && digit > 2) { e.target.value = ''; return; }
            } else if (type === 'm1') {
                if (digit > 5) { e.target.value = ''; return; }
            }
            
            updateTimeFromInputs();

            // Move focus
            if (type === 'h1') document.getElementById('h2').focus();
            if (type === 'h2') document.getElementById('m1').focus();
            if (type === 'm1') document.getElementById('m2').focus();
            if (type === 'm2') document.getElementById('m2').blur();
        }

        function updateTimeFromInputs() {
            const h1 = parseInt(document.getElementById('h1').value) || 0;
            const h2 = parseInt(document.getElementById('h2').value) || 0;
            const m1 = parseInt(document.getElementById('m1').value) || 0;
            const m2 = parseInt(document.getElementById('m2').value) || 0;
            
            let h = h1 * 10 + h2;
            const m = m1 * 10 + m2;
            
            if (h > 12) h = 12;
            if (h === 0) h = 12;
            
            const isPM = document.getElementById('badge-ampm').textContent === 'PM';
            
            if (h === 12) {
                hours = isPM ? 12 : 0;
            } else {
                hours = isPM ? h + 12 : h;
            }
            
            minutes = m;
            liveMode = false;
            draw();
            updateChat(hours, minutes);
            updateDigital();
        }

        // Example Audio Player
        let currentExampleAudio = null;

        window.playExample = function(id) {
            // Visual feedback
            const btn = event.target.closest('.example-play-btn');
            
            // Reset previous styles if any
            document.querySelectorAll('.example-play-btn').forEach(b => {
                b.style.background = '';
                b.style.color = '';
            });

            btn.style.background = '#ea580c';
            btn.style.color = 'white';
            
            if (currentExampleAudio) {
                currentExampleAudio.pause();
                currentExampleAudio = null;
            }
            
            const filename = id.includes('.') ? id : id.slice(0, 2) + '.' + id.slice(2);
            const audioPath = `../../../assets/activities/telling-the-time/${filename}.mp3`;
            currentExampleAudio = new Audio(audioPath);
            
            currentExampleAudio.play().catch(e => {
                console.log('Audio not found:', audioPath);
                btn.style.background = '';
                btn.style.color = '';
            });
            
            currentExampleAudio.onended = () => {
                btn.style.background = '';
                btn.style.color = '';
            };
        };

        // Preparation Listening Practice
        let currentPracticeAudio = null;

        window.playPracticeAudio = function(filename) {
            const btn = event.currentTarget;
            const icon = btn.querySelector('i');

            // Reset all buttons
            document.querySelectorAll('.listening-audio-btn').forEach(b => {
                b.classList.remove('playing');
                b.querySelector('i').className = 'fa-solid fa-play';
            });

            if (currentPracticeAudio) {
                currentPracticeAudio.pause();
                currentPracticeAudio = null;
            }

            btn.classList.add('playing');
            icon.className = 'fa-solid fa-pause';

            const audioPath = `../../../assets/activities/telling-the-time/${filename}.mp3`;
            currentPracticeAudio = new Audio(audioPath);

            currentPracticeAudio.play().catch(e => {
                console.log('Audio not found:', audioPath);
                btn.classList.remove('playing');
                icon.className = 'fa-solid fa-play';
            });

            currentPracticeAudio.onended = () => {
                btn.classList.remove('playing');
                icon.className = 'fa-solid fa-play';
            };
        };

        const checkListeningBtn = document.getElementById('checkListeningBtn');
        const retryListeningBtn = document.getElementById('retryListeningBtn');

        document.querySelectorAll('.listening-input').forEach(input => {
            input.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9:]/g, '');
            });
        });

        checkListeningBtn.addEventListener('click', () => {
            const items = document.querySelectorAll('.listening-item');
            let correctCount = 0;
            let total = items.length;

            items.forEach(item => {
                const input = item.querySelector('.listening-input');
                const correctAnswer = item.dataset.answer;
                let userAnswer = input.value.trim();

                // Normalize input (e.g., "8:00" -> "08:00")
                if (/^\d:\d{2}$/.test(userAnswer)) {
                    userAnswer = '0' + userAnswer;
                }

                input.classList.remove('correct', 'incorrect');

                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    correctCount++;
                } else {
                    input.classList.add('incorrect');
                }
            });

            showFeedbackPopup(correctCount, total);
            retryListeningBtn.disabled = false;
        });

        retryListeningBtn.addEventListener('click', () => {
            document.querySelectorAll('.listening-item').forEach(item => {
                const input = item.querySelector('.listening-input');
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });
            retryListeningBtn.disabled = true;
        });

        // â”€â”€ Post-Listening Logic â”€â”€
        const checkPostListeningBtn = document.getElementById('checkPostListeningBtn');
        const retryPostListeningBtn = document.getElementById('retryPostListeningBtn');
        const postListeningList = document.getElementById('post-listening-list');

        if (checkPostListeningBtn) {
            checkPostListeningBtn.addEventListener('click', () => {
                const items = postListeningList.querySelectorAll('.sentence-item');
                let correctCount = 0;
                let total = items.length;

                items.forEach(item => {
                    const select = item.querySelector('.sentence-dropdown');
                    const correctAnswer = item.dataset.correct;
                    
                    select.classList.remove('correct', 'incorrect');
                    
                    if (select.value === correctAnswer) {
                        select.classList.add('correct');
                        correctCount++;
                    } else {
                        select.classList.add('incorrect');
                    }
                });

                showFeedbackPopup(correctCount, total);
                retryPostListeningBtn.disabled = false;
            });

            retryPostListeningBtn.addEventListener('click', () => {
                postListeningList.querySelectorAll('.sentence-dropdown').forEach(select => {
                    select.value = "";
                    select.classList.remove('correct', 'incorrect');
                });
                retryPostListeningBtn.disabled = true;
            });
        }

        // â”€â”€ Practice Drag & Drop Logic â”€â”€
        const timesContainer = document.getElementById('timesContainer');
        const timeGaps = document.querySelectorAll('.time-gap');
        let draggedTime = null;

        // Add listeners to initial draggable items
        document.querySelectorAll('.draggable-time').forEach(item => {
            item.addEventListener('dragstart', handleDragStart);
            item.addEventListener('dragend', handleDragEnd);
        });

        function handleDragStart(e) {
            draggedTime = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedTime = null;
        }

        // Drop zones (gaps)
        timeGaps.forEach(gap => {
            gap.addEventListener('dragover', e => {
                e.preventDefault();
                gap.classList.add('drag-over');
            });
            gap.addEventListener('dragleave', () => gap.classList.remove('drag-over'));
            gap.addEventListener('drop', handleDrop);
        });

        // Times container (to return items)
        timesContainer.addEventListener('dragover', e => {
            e.preventDefault();
            timesContainer.classList.add('drag-over'); // Optional visual cue
        });
        timesContainer.addEventListener('drop', e => {
            e.preventDefault();
            timesContainer.classList.remove('drag-over');
            if (draggedTime && draggedTime.classList.contains('dropped-time')) {
                // Convert back to draggable-time
                const timeVal = draggedTime.textContent;
                draggedTime.remove();
                createDraggableTime(timeVal);
            }
        });

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (!draggedTime) return;

            // If gap already has a time, move it back to container
            if (this.children.length > 0) {
                const existing = this.children[0];
                createDraggableTime(existing.textContent);
                existing.remove();
            }

            // Create dropped element
            const droppedEl = document.createElement('span');
            droppedEl.className = 'dropped-time';
            droppedEl.textContent = draggedTime.textContent;
            droppedEl.draggable = true;
            droppedEl.addEventListener('dragstart', handleDragStart);
            droppedEl.addEventListener('dragend', handleDragEnd);
            
            this.appendChild(droppedEl);

            // Remove original if it came from container
            if (draggedTime.parentElement === timesContainer) {
                draggedTime.remove();
            } else {
                // If moved from another gap, original is already removed by appendChild logic or we remove it here
                draggedTime.remove();
            }
        }

        function createDraggableTime(text) {
            const el = document.createElement('div');
            el.className = 'draggable-time';
            el.draggable = true;
            el.dataset.time = text;
            el.textContent = text;
            el.addEventListener('dragstart', handleDragStart);
            el.addEventListener('dragend', handleDragEnd);
            timesContainer.appendChild(el);
        }

        // Check Answers
        const checkBtn = document.getElementById('checkPracticeBtn');
        const retryBtn = document.getElementById('retryPracticeBtn');
        const feedback = document.getElementById('practiceFeedback');

        checkBtn.addEventListener('click', () => {
            let correctCount = 0;
            let answeredCount = 0;
            timeGaps.forEach(gap => {
                const dropped = gap.querySelector('.dropped-time');
                if (dropped) {
                    answeredCount++;
                    if (dropped.textContent === gap.dataset.correct) {
                        gap.classList.add('correct');
                        dropped.classList.add('correct-text');
                        correctCount++;
                    } else {
                        gap.classList.add('incorrect');
                        dropped.classList.add('incorrect-text');
                    }
                }
            });

            if (answeredCount < timeGaps.length) {
                showFeedbackPopup(-1, timeGaps.length);
                return;
            }
            
            feedback.textContent = `You got ${correctCount} out of ${timeGaps.length} correct.`;
            feedback.style.color = correctCount === timeGaps.length ? '#16a34a' : '#ea580c';
            
            showFeedbackPopup(correctCount, timeGaps.length);
            checkBtn.disabled = true;
            retryBtn.disabled = false;
        });

        retryBtn.addEventListener('click', () => {
            // Reset everything
            timeGaps.forEach(gap => {
                gap.classList.remove('correct', 'incorrect');
                const dropped = gap.querySelector('.dropped-time');
                if (dropped) {
                    createDraggableTime(dropped.textContent);
                    dropped.remove();
                }
            });
            feedback.textContent = '';
            checkBtn.disabled = false;
            retryBtn.disabled = true;
        });

        // Feedback Popup
        const feedbackPopupOverlay = document.createElement('div');
        feedbackPopupOverlay.className = 'feedback-popup-overlay';
        feedbackPopupOverlay.innerHTML = `
            <div class="feedback-popup">
                <div class="feedback-popup-icon"></div>
                <h3></h3>
                <p></p>
                <button class="feedback-popup-close">Close</button>
            </div>
        `;
        document.body.appendChild(feedbackPopupOverlay);

        function showFeedbackPopup(correct, total) {
            const icon = feedbackPopupOverlay.querySelector('.feedback-popup-icon');
            const title = feedbackPopupOverlay.querySelector('h3');
            const message = feedbackPopupOverlay.querySelector('p');

            if (correct === -1) { // Special case for not all answered
                icon.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i>';
                icon.className = 'feedback-popup-icon partial';
                title.textContent = 'Incomplete';
                message.textContent = 'Please fill in all the gaps before checking.';
                feedbackPopupOverlay.classList.add('show');
                return;
            }

            const percentage = total > 0 ? (correct / total) * 100 : 0;

            if (correct === total) {
                icon.innerHTML = '<i class="fa-solid fa-circle-check"></i>';
                icon.className = 'feedback-popup-icon success';
                title.textContent = 'Perfect!';
            } else if (percentage >= 70) {
                icon.innerHTML = '<i class="fa-solid fa-thumbs-up"></i>';
                icon.className = 'feedback-popup-icon good';
                title.textContent = 'Good Job!';
            } else {
                icon.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i>';
                icon.className = 'feedback-popup-icon partial';
                title.textContent = 'Keep Practicing!';
            }

            message.textContent = `${correct} out of ${total} answers correct.`;
            feedbackPopupOverlay.classList.add('show');
        }

        feedbackPopupOverlay.querySelector('.feedback-popup-close').addEventListener('click', () => {
            feedbackPopupOverlay.classList.remove('show');
        });

        feedbackPopupOverlay.addEventListener('click', (e) => {
            if (e.target === feedbackPopupOverlay) {
                feedbackPopupOverlay.classList.remove('show');
            }
        });

        // Draw static clocks for section 2
        function drawStaticClock(canvasId, hours, minutes, highlightColor) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = canvas.width / 2;

            // Clear canvas
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw highlighted minute area
if (highlightColor === 'red') {
    const startAngle = (1 * 6 - 90) * Math.PI / 180;
    const endAngle = (29 * 6 - 90) * Math.PI / 180;
    ctx.fillStyle = 'rgba(239, 68, 68, 0.15)';
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius - 12, startAngle, endAngle);
    ctx.closePath();
    ctx.fill();
} else if (highlightColor === 'blue') {
    const startAngle = (31 * 6 - 90) * Math.PI / 180;
    const endAngle = (59 * 6 - 90) * Math.PI / 180;
    ctx.fillStyle = 'rgba(22, 163, 74, 0.1)';
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius - 12, startAngle, endAngle);
    ctx.closePath();
    ctx.fill();
}

            // Draw clock circle
            const borderThickness = 12;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.arc(centerX, centerY, radius - borderThickness, 0, 2 * Math.PI, true);
            ctx.fillStyle = '#111';
            ctx.fill('evenodd');

            // Draw numbers
            ctx.fillStyle = '#111';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            for (let i = 1; i <= 12; i++) {
                const angle = (i * 30 - 90) * Math.PI / 180;
                const x = centerX + Math.cos(angle) * (radius - 35);
                const y = centerY + Math.sin(angle) * (radius - 35);
                ctx.fillText(i, x, y);
            }

            // Draw minute markers
            for (let i = 0; i < 60; i++) {
                const angle = (i * 6 - 90) * Math.PI / 180;
                const isHour = i % 5 === 0;
                const outer = radius - borderThickness;
                const inner = isHour ? outer - 10 : outer - 5;
                
                // Highlight the 30-minute tick in red for half-past illustration
                if (highlightColor === 'none' && i === 30) {
                    ctx.strokeStyle = '#EF4444';
                    ctx.lineWidth = 2.5;
                } else {
                    ctx.strokeStyle = '#111';
                    ctx.lineWidth = isHour ? 2 : 1;
                }
                
                ctx.beginPath();
                ctx.moveTo(centerX + Math.cos(angle) * outer, centerY + Math.sin(angle) * outer);
                ctx.lineTo(centerX + Math.cos(angle) * inner, centerY + Math.sin(angle) * inner);
                ctx.stroke();
            }

            // Draw center dot
            ctx.fillStyle = '#111';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
            ctx.fill();

            // Draw hour hand
            const hourAngle = ((hours % 12) * 30 + minutes * 0.5 - 90) * Math.PI / 180;
            ctx.strokeStyle = '#111';
            ctx.lineWidth = 7;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(hourAngle) * (radius * 0.5),
                centerY + Math.sin(hourAngle) * (radius * 0.5)
            );
            ctx.stroke();

            // Draw minute hand
            const minuteAngle = (minutes * 6 - 90) * Math.PI / 180;
            ctx.strokeStyle = '#111';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(minuteAngle) * (radius * 0.7),
                centerY + Math.sin(minuteAngle) * (radius * 0.7)
            );
            ctx.stroke();
        }

        // Draw the three static clocks when page loads
        drawStaticClock('clockPast', 6, 25, 'red');
        drawStaticClock('clockHalfPast', 6, 30, 'none');
        drawStaticClock('clockTo', 6, 35, 'blue');
    });
    </script>
</body>
</html>

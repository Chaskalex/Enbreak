<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enbreak | Spelling Names</title>
    <link rel="icon" type="image/x-icon" href="../../../favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../favicon/apple-touch-icon.png">
    <link rel="manifest" href="../../../favicon/site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="../../../css/buttons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Rubik:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/style.css">
    <link rel="stylesheet" href="../../../css/activities.css">
    <style>
/* Hero Section */
.activity-hero {
    background-image: url('../../../assets/activities/spelling.png');
}

/* Alphabet Grid Styles */
.alphabet-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 16px;
    margin-top: 20px;
}

.letter-card {
    aspect-ratio: 1;
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.letter-card:hover {
    border-color: #ea580c;
    background: #fff7ed;
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(234, 88, 12, 0.1);
}

.letter-card.playing {
    border-color: #ea580c;
    background: #ffedd5;
    box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.2);
}

.letter-char {
    font-family: 'Rubik', sans-serif;
    font-size: 32px;
    font-weight: 700;
    color: #1f2937;
}

.letter-sound {
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    color: #6b7280;
    margin-top: 4px;
    font-weight: 500;
}

.letter-icon {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 12px;
    color: #ea580c;
    opacity: 0;
    transition: opacity 0.2s;
}

.letter-card:hover .letter-icon {
    opacity: 1;
}

/* Variant Indicators */
.letter-variant-mark {
    position: absolute;
    top: 8px;
    left: 8px;
    font-size: 20px;
    line-height: 1;
    color: #ea580c;
    opacity: 0.4;
    font-family: 'Rubik', sans-serif;
    cursor: help;
}

.letter-card.highlight-update {
    animation: highlightPulse 0.6s ease;
}

@keyframes highlightPulse {
    0% { background-color: #fff7ed; border-color: #ea580c; }
    100% { background-color: white; border-color: #e5e7eb; }
}

/* Accent Toggle */
.accent-toggle {
    display: flex;
    gap: 8px;
    margin-left: 16px;
}

.accent-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border: 1px solid #e5e7eb;
    border-radius: 20px;
    background: white;
    font-family: 'Inter', sans-serif;
    font-size: 12px;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
}

.accent-btn:hover {
    background: #f9fafb;
    border-color: #d1d5db;
}

.accent-btn.active {
    background: #ffedd5;
    border-color: #ea580c;
    color: #ea580c;
}

/* Examples Section */
.examples-container {
    margin-top: 24px;
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e2e8f0;
}

.examples-title {
    font-family: 'Rubik', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #475569;
    margin: 0 0 12px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.examples-list {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
}

.example-item {
    display: flex;
    align-items: center;
    gap: 10px;
    background: white;
    padding: 8px 16px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.example-play-btn {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #f1f5f9;
    border: none;
    color: #64748b;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    cursor: pointer;
    transition: all 0.2s;
}

.example-play-btn:hover {
    background: #ea580c;
    color: white;
}

.example-text {
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #334155;
    letter-spacing: 1px;
}

/* ── Spelling item card ──────────────────────────────────────── */
.spelling-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-top: 24px;
}

.spelling-item {
    background: #ffffff;
    border: 1.5px solid #D9E2EE;
    border-radius: 16px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    width: fit-content;
    box-shadow: 0 1px 3px rgba(30,45,64,.07), 0 1px 2px rgba(30,45,64,.05);
    transition: border-color .2s, box-shadow .2s, transform .15s;
}

.spelling-item:hover {
    border-color: #B4C8E0;
    box-shadow: 0 4px 12px rgba(30,45,64,.11), 0 2px 4px rgba(30,45,64,.07);
    transform: translateY(-1px);
}

/* ── Play button ─────────────────────────────────────────────── */
.spelling-audio-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: #F0F4FA;
    border: 2px solid #D9E2EE;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #3B4F66;
    cursor: pointer;
    flex-shrink: 0;
    transition: background .2s, border-color .2s, color .2s, transform .15s;
}

.spelling-audio-btn:hover {
    background: #E8EEF7;
    border-color: #B4C8E0;
    color: #1E2D40;
    transform: scale(1.07);
}

.spelling-audio-btn:active {
    transform: scale(0.96);
}

.spelling-audio-btn.playing {
    background: #1E2D40;
    border-color: #1E2D40;
    color: white;
    animation: pulse-ring-navy 1.4s infinite;
}

@keyframes pulse-ring-navy {
    0%   { box-shadow: 0 0 0 0 rgba(30,45,64,.4); }
    70%  { box-shadow: 0 0 0 8px rgba(30,45,64,0); }
    100% { box-shadow: 0 0 0 0 rgba(30,45,64,0); }
}

/* ── Audio controls wrapper ──────────────────────────────────── */
.audio-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
}

/* ── Speed button ────────────────────────────────────────────── */
.speed-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #F0F4FA;
    border: 2px solid #D9E2EE;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 9.5px;
    font-weight: 600;
    color: #3B4F66;
    font-family: 'Inter', sans-serif;
    padding: 0;
    line-height: 1;
    letter-spacing: -0.4px;
    transition: background .2s, border-color .2s, color .2s, transform .15s;
    user-select: none;
}

.speed-btn:hover {
    background: #E8EEF7;
    border-color: #B4C8E0;
    color: #1E2D40;
    transform: scale(1.07);
}

.speed-btn:active {
    transform: scale(0.96);
}

/* ── Input slot ──────────────────────────────────────────────── */
.spelling-input-wrapper {
    flex: 1;
}

.spelling-input {
    width: 300px;
    padding: 11px 16px;
    background: #F0F4FA;
    border: 2px solid transparent;
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    color: #1E2D40;
    outline: none;
    transition: border-color .2s, background .2s, box-shadow .2s;
    text-transform: uppercase;
}

#list-emails .spelling-input {
    text-transform: lowercase;
}

.spelling-input::placeholder {
    text-transform: none;
}

.spelling-input:focus {
    background: #ffffff;
    border-color: #ea580c;
    box-shadow: 0 0 0 4px rgba(234,88,12,.1);
}

/* Correct / Incorrect states — editable, not locked */
.spelling-input.correct {
    background: #F0FDF4;
    border-color: #86EFAC;
    color: #166534;
    box-shadow: 0 0 0 4px rgba(34,197,94,.08);
}

.spelling-input.incorrect {
    background: #FFF1F2;
    border-color: #FCA5A5;
    color: #991b1b;
    box-shadow: 0 0 0 4px rgba(239,68,68,.08);
}

@media (max-width: 768px) {
    .exercise-header { flex-wrap: wrap; }
    .accent-toggle { margin-left: 0; width: 100%; margin-top: 10px; }
    .accent-btn { flex: 1; justify-content: center; }
    .spelling-item { flex-direction: column; align-items: flex-start; gap: 12px; width: 100%; }
    .spelling-input-wrapper { width: 100%; }
    .spelling-input { width: 100%; }
}

[data-lucide] {
    display: inline-block;
    vertical-align: middle;
}
[data-lucide] svg {
    display: block;
    width: 100%;
    height: 100%;
}
    </style>
    <script>
        const activityConfig = {
            type: 'vocabulary',
            tabs: ['introduction', 'preparation', 'practice'],
            hiddenTab: null
        };
    </script>
    <script src="../../../js/tabs.js"></script>
</head>
<body>

    <div id="header-placeholder"></div>

    <main class="activity-page">
        <!-- Hero Section -->
        <section class="activity-hero">
            <div class="activity-hero-content">
                <nav class="breadcrumb">
                    <a href="/">Inicio</a>
                    <span class="breadcrumb-separator">›</span>
                    <a href="../actividades.html">Actividades</a>
                    <span class="breadcrumb-separator">›</span>
                    <span class="breadcrumb-current">Spelling Names</span>
                </nav>
                <h1>Spelling Names</h1>
                <div class="activity-hero-badges">
                    <span class="hero-badge"><i class="fa-solid fa-spell-check"></i> Vocabulary</span>
                    <span class="hero-badge"><i class="fa-solid fa-layer-group"></i> Level A1</span>
                    <span class="hero-badge"><i class="fa-regular fa-clock"></i> 15 min</span>
                </div>
            </div>
        </section>

        <!-- Activity Content -->
        <section class="activity-container">
            <div class="tabs-wrapper">
                <!-- Tab Navigation -->
                <nav class="tab-nav">
                    <div class="tab-nav-main">
                        <button class="tab-btn active" data-tab="introduction">Introduction</button>
                        <button class="tab-btn" data-tab="preparation">Preparation</button>
                        <button class="tab-btn" data-tab="practice">Practice</button>
                    </div>
                </nav>

            <!-- Introduction Tab -->
                <div class="tab-content active" id="introduction">
                    <div class="intro-grid">
                        <div class="intro-main">
                            <p class="intro-text">
                                How do you spell that? It is one of the most common questions in everyday communication, and not being able to answer it clearly can create real problems. Knowing how to spell out loud is a skill that comes up more often than you think.
                            </p>
                            <p class="intro-text">
                                In this activity, you will review the <strong>alphabet</strong> and learn how to spell common things like your <strong>name</strong>, <strong>email address</strong>, and <strong>street name</strong>. You will also cover special symbols used in everyday written communication.
                            </p>
                            <p class="intro-text">
                                Through vocabulary review and listening exercises, you will build the confidence to spell clearly and understand others when they spell things out to you.
                            </p>
                        </div>
                        <div class="intro-sidebar">
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-bullseye"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Learning Objective</h4>
                                    <p>You will be able to spell names and understand spelled words correctly.</p>
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-spell-check"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Skill Focus</h4>
                                    <p>Vocabulary & Listening (A1 Level)</p>
                                </div>
                            </div>
                            <div class="info-card">
                                <div class="info-card-icon">
                                    <i class="fa-solid fa-link"></i>
                                </div>
                                <div class="info-card-content">
                                    <h4>Source</h4>
                                    <p>Enbreak Original Content</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                 <!-- Preparation Tab -->
                <div class="tab-content" id="preparation">
                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">1</span>
                            <h3>The Alphabet</h3>
                            <div class="accent-toggle">
                                <button class="accent-btn active" data-accent="uk"><span class="fi fi-gb"></span> British</button>
                                <button class="accent-btn" data-accent="us"><span class="fi fi-us"></span> American</button>
                            </div>
                        </div>
                        <p class="exercise-instructions">Click on each letter to hear its pronunciation.</p>
                        
                        <div class="alphabet-grid" id="alphabet-grid">
                            <!-- Generated by JS -->
                        </div>

                        <div class="examples-container">
                            <h4 class="examples-title">Examples</h4>
                            <div class="examples-list">
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('alex')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">ALEX</span>
                                </div>
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('emma')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">EMMA</span>
                                </div>
                            </div>
                        </div>

                        <div class="tip-box">
                            <div class="tip-header">
                                <i data-lucide="info" style="width: 20px; height: 20px;"></i> Tip
                            </div>
                            <div class="tip-content">
                                <ul>
                                    <li>It is very common to say <strong>"that's"</strong> before starting to spell. Example: "My name is Trisha, <strong>that's</strong> T-R-I-S-H-A, Trisha."</li>
                                    <li>When two letters are repeated, people say <strong>"double + letter"</strong>. Example: "Miller, M-I-<strong>double L</strong>-E-R."</li>
                                </ul> 
                            </div>
                        </div>
                    </div>

                    <div class="exercise-section" style="margin-top: 40px;">
                        <div class="exercise-header">
                            <span class="exercise-number">2</span>
                            <h3>Special Symbols</h3>
                        </div>
                        <p class="exercise-instructions">Click on each symbol to hear its pronunciation.</p>
                        
                        <div class="alphabet-grid" id="symbols-grid">
                            <!-- Generated by JS -->
                        </div>

                        <div class="examples-container">
                            <h4 class="examples-title">Examples</h4>
                            <div class="examples-list">
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('email1_example')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">alex@email.com</span>
                                </div>
                                <div class="example-item">
                                    <button class="example-play-btn" onclick="playExample('email2_example')"><i class="fa-solid fa-play"></i></button>
                                    <span class="example-text">emma.smith@web.net</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Practice Tab -->
                <div class="tab-content" id="practice">
                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">3</span>
                            <h3>Spelling First Names</h3>
                        </div>
                        <p class="exercise-instructions">Listen and write the first names.</p>
                        
                        <div class="spelling-list" id="list-names">
                            <div class="spelling-item" data-answer="ADRIAN">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('adrian')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="CHLOE">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('chloe')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="YVONNE">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('yvonne')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name..." autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; align-items: center; margin-top: 20px;">
                            <button class="check-answers-btn" id="check-names">
                                <i class="fa-solid fa-check"></i> Check answers
                            </button>
                            <button class="check-answers-btn retry-btn" id="retry-names" disabled>
                                <i class="fa-solid fa-rotate-right"></i> Try again
                            </button>
                        </div>
                    </div>

                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">4</span>
                            <h3>Spelling Surnames</h3>
                        </div>
                        <p class="exercise-instructions">Listen and write the surnames.</p>
                        
                        <div class="spelling-list" id="list-surnames">
                            <div class="spelling-item" data-answer="FEATHERSTONE">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('featherstone')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the surname..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="GALLAGHER">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('gallagher')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the surname..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="KOWALSKI">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('kowalski')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the surname..." autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="check-answers-btn" id="check-surnames">
                                <i class="fa-solid fa-check"></i> Check answers
                            </button>
                            <button class="check-answers-btn retry-btn" id="retry-surnames" disabled>
                                <i class="fa-solid fa-rotate-right"></i> Try again
                            </button>
                        </div>
                    </div>

                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">5</span>
                            <h3>Spelling Addresses</h3>
                        </div>
                        <p class="exercise-instructions">Listen and write the street names or cities.</p>
                        
                        <div class="spelling-list" id="list-addresses">
                            <div class="spelling-item" data-answer="LEICESTER">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('leicester')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name of the city..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="WAINWRIGHT">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('wainwright')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name of the street..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="CHELMSFORD">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('chelmsford')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the name of the road..." autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="check-answers-btn" id="check-addresses">
                                <i class="fa-solid fa-check"></i> Check answers
                            </button>
                            <button class="check-answers-btn retry-btn" id="retry-addresses" disabled>
                                <i class="fa-solid fa-rotate-right"></i> Try again
                            </button>
                        </div>
                    </div>

                    <div class="exercise-section">
                        <div class="exercise-header">
                            <span class="exercise-number">6</span>
                            <h3>Spelling Emails and Websites</h3>
                        </div>
                        <p class="exercise-instructions">Listen and write the email addresses or websites. Use symbols when necessary.</p>
                        
                        <div class="spelling-list" id="list-emails">
                            <div class="spelling-item" data-answer="SOPHIE.BENNETT_92@EMAIL.COM">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('sophie.bennett_92@email.com')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the email..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="THOMAS-RYDER@XMAIL.COM">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('thomas-ryder@xmail.com')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the email..." autocomplete="off">
                                </div>
                            </div>

                            <div class="spelling-item" data-answer="CITYTRAVEL.CO.UK/INFO">
                                <div class="audio-controls">
                                    <button class="spelling-audio-btn" onclick="playAudio('citytravel.co.uk(slash)info')">
                                        <i class="fa-solid fa-play"></i>
                                    </button>
                                    <button class="speed-btn" onclick="toggleSpeed(this)" data-speed="1">1x</button>
                                </div>
                                <div class="spelling-input-wrapper">
                                    <input type="text" class="spelling-input" placeholder="Type the website..." autocomplete="off">
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="check-answers-btn" id="check-emails">
                                <i class="fa-solid fa-check"></i> Check answers
                            </button>
                            <button class="check-answers-btn retry-btn" id="retry-emails" disabled>
                                <i class="fa-solid fa-rotate-right"></i> Try again
                            </button>
                        </div>
                    </div>

                    <div class="completion-box">
                        <div class="completion-bar"></div>
                        <div class="completion-inner">
                            <div class="completion-header">
                                <div class="completion-icon">
                                    <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
                                </div>
                                <h2 class="completion-title">Activity Complete!</h2>
                            </div>
                            <p class="completion-subtitle">You've completed <strong>"Spelling Names"</strong>. Here's what you've practised:</p>
                            <div class="skills-list">
                                <div class="skill-item">
                                    <div class="skill-check"><svg viewBox="0 0 12 12"><polyline points="2,6 5,9 10,3"/></svg></div>
                                    The English alphabet pronunciation (British & American)
                                </div>
                                <div class="skill-item">
                                    <div class="skill-check"><svg viewBox="0 0 12 12"><polyline points="2,6 5,9 10,3"/></svg></div>
                                    Spelling first names, surnames, and addresses correctly
                                </div>
                                <div class="skill-item">
                                    <div class="skill-check"><svg viewBox="0 0 12 12"><polyline points="2,6 5,9 10,3"/></svg></div>
                                    Writing email addresses and website URLs with symbols
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="activity-nav">
                    <button class="nav-btn nav-btn-back" id="btn-back" disabled>
                        <i class="fa-solid fa-arrow-left"></i> Back
                    </button>
                    <button class="nav-btn nav-btn-next" id="btn-next">
                        Next <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../../../js/layout.js"></script>
    <script src="../../../js/script.js" defer></script>
    <script src="../../../js/checkanswers.js"></script>
    <script>
    let currentAccent = 'uk';

    document.addEventListener('DOMContentLoaded', function() {
        lucide.createIcons();
        
        // Disable autocomplete and spellcheck for all spelling inputs
        document.querySelectorAll('.spelling-input').forEach(input => {
            input.setAttribute('autocomplete', 'off');
            input.setAttribute('spellcheck', 'false');
            input.setAttribute('autocorrect', 'off');
            input.setAttribute('autocapitalize', 'off');
        });

        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const btnBack = document.getElementById('btn-back');
        const btnNext = document.getElementById('btn-next');
        let currentTabIndex = 0;

        // Alphabet Generation
        const alphabetGrid = document.getElementById('alphabet-grid');
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const phoneticsData = {
            'A': { us: '/eɪ/', uk: '/eɪ/' }, 'B': { us: '/biː/', uk: '/biː/' }, 'C': { us: '/siː/', uk: '/siː/' },
            'D': { us: '/diː/', uk: '/diː/' }, 'E': { us: '/iː/', uk: '/iː/' }, 'F': { us: '/ef/', uk: '/ef/' },
            'G': { us: '/dʒiː/', uk: '/dʒiː/' }, 'H': { us: '/eɪtʃ/', uk: '/eɪtʃ/' }, 'I': { us: '/aɪ/', uk: '/aɪ/' },
            'J': { us: '/dʒeɪ/', uk: '/dʒeɪ/' }, 'K': { us: '/keɪ/', uk: '/keɪ/' }, 'L': { us: '/el/', uk: '/el/' },
            'M': { us: '/em/', uk: '/em/' }, 'N': { us: '/en/', uk: '/en/' }, 'O': { us: '/oʊ/', uk: '/əʊ/' },
            'P': { us: '/piː/', uk: '/piː/' }, 'Q': { us: '/kjuː/', uk: '/kjuː/' }, 'R': { us: '/ɑːr/', uk: '/ɑː/' },
            'S': { us: '/es/', uk: '/es/' }, 'T': { us: '/tiː/', uk: '/tiː/' }, 'U': { us: '/juː/', uk: '/juː/' },
            'V': { us: '/viː/', uk: '/viː/' }, 'W': { us: '/ˈdʌbəl.juː/', uk: '/ˈdʌbəl.juː/' }, 'X': { us: '/eks/', uk: '/eks/' },
            'Y': { us: '/waɪ/', uk: '/waɪ/' }, 'Z': { us: '/ziː/', uk: '/zed/' }
        };

        function renderAlphabet() {
            alphabetGrid.innerHTML = '';
            alphabet.forEach(letter => {
                const card = document.createElement('div');
                card.className = 'letter-card';
                card.dataset.letter = letter;
                
                const isDifferent = phoneticsData[letter].us !== phoneticsData[letter].uk;
                const variantIcon = isDifferent ? '<span class="letter-variant-mark" title="Pronunciation varies between accents">*</span>' : '';

                card.innerHTML = `
                    <span class="letter-char">${letter}</span>
                    <span class="letter-sound">${phoneticsData[letter][currentAccent]}</span>
                    <i class="fa-solid fa-volume-high letter-icon"></i>
                    ${variantIcon}
                `;
                card.onclick = () => playLetterSound(letter, card);
                alphabetGrid.appendChild(card);
            });
        }

        function updateAlphabetDisplay() {
            alphabet.forEach(letter => {
                if (phoneticsData[letter].us !== phoneticsData[letter].uk) {
                    const card = alphabetGrid.querySelector(`[data-letter="${letter}"]`);
                    if (card) {
                        const soundEl = card.querySelector('.letter-sound');
                        soundEl.textContent = phoneticsData[letter][currentAccent];
                        card.classList.remove('highlight-update');
                        void card.offsetWidth;
                        card.classList.add('highlight-update');
                    }
                }
            });
        }

        renderAlphabet();

        // Accent Toggle Logic
        const accentBtns = document.querySelectorAll('.accent-btn');
        accentBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (btn.classList.contains('active')) return;
                accentBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentAccent = btn.dataset.accent;
                updateAlphabetDisplay();
            });
        });

        // Symbols Generation
        const symbolsGrid = document.getElementById('symbols-grid');
        const symbols = [
            { char: '.', name: 'dot' },
            { char: '@', name: 'at' },
            { char: '-', name: 'hyphen' },
            { char: '_', name: 'underscore' },
            { char: '/', name: 'slash' },
            { char: ',', name: 'comma' },
            { char: '"', name: 'quote' }
        ];

        symbols.forEach(symbol => {
            const card = document.createElement('div');
            card.className = 'letter-card';
            card.innerHTML = `
                <span class="letter-char">${symbol.char}</span>
                <span class="letter-sound">${symbol.name}</span>
                <i class="fa-solid fa-volume-high letter-icon"></i>
            `;
            card.onclick = () => playLetterSound(symbol.name, card);
            symbolsGrid.appendChild(card);
        });

        // Spelling Check Logic
        function setupSpellingExercise(checkBtnId, retryBtnId, listId) {
            const checkBtn = document.getElementById(checkBtnId);
            const retryBtn = document.getElementById(retryBtnId);
            const list = document.getElementById(listId);
            
            if (checkBtn && retryBtn && list) {
                // Clear feedback colour as soon as student starts editing
                list.addEventListener('input', function(e) {
                    if (e.target.classList.contains('spelling-input')) {
                        e.target.classList.remove('correct', 'incorrect');
                    }
                });

                checkBtn.addEventListener('click', function() {
                    const items = list.querySelectorAll('.spelling-item');
                    let correctCount = 0;
                    let total = items.length;

                    items.forEach(item => {
                        const input = item.querySelector('.spelling-input');
                        const correctAnswer = item.dataset.answer;
                        const userAnswer = input.value.trim().toUpperCase();

                        input.classList.remove('correct', 'incorrect');

                        if (userAnswer === correctAnswer) {
                            input.classList.add('correct');
                            correctCount++;
                        } else if (userAnswer !== '') {
                            input.classList.add('incorrect');
                        }
                    });

                    showFeedbackPopup(correctCount, total);
                    // Activate Try again
                    retryBtn.disabled = false;
                });

                retryBtn.addEventListener('click', function() {
                    const items = list.querySelectorAll('.spelling-item');
                    items.forEach(item => {
                        const input = item.querySelector('.spelling-input');
                        input.value = '';
                        input.classList.remove('correct', 'incorrect');
                    });
                    retryBtn.disabled = true;
                });
            }
        }

        setupSpellingExercise('check-names', 'retry-names', 'list-names');
        setupSpellingExercise('check-surnames', 'retry-surnames', 'list-surnames');
        setupSpellingExercise('check-addresses', 'retry-addresses', 'list-addresses');
        setupSpellingExercise('check-emails', 'retry-emails', 'list-emails');
    });

    let currentLetterAudio = null;

    function playLetterSound(letter, cardElement) {
        document.querySelectorAll('.letter-card').forEach(c => c.classList.remove('playing'));
        cardElement.classList.add('playing');
        
        if (currentLetterAudio) {
            currentLetterAudio.pause();
            currentLetterAudio = null;
        }
        
        let filename = letter.toUpperCase();

        if (currentAccent === 'us' && ['O', 'R', 'Z'].includes(filename)) {
            filename = `${filename} American`;
        }

        const audioPath = `../../../assets/activities/spelling-names/${filename}.mp3`;
        
        currentLetterAudio = new Audio(audioPath);
        
        currentLetterAudio.play().catch(e => {
            console.log('Audio not found:', audioPath);
            cardElement.classList.remove('playing');
        });
        
        currentLetterAudio.onended = () => {
            cardElement.classList.remove('playing');
        };
    }

    let currentAudio = null;
    let currentBtn = null;

    function playAudio(filename) {
        const btn = event.currentTarget;
        const icon = btn.querySelector('i');
        
        if (currentBtn === btn && currentAudio) {
            if (currentAudio.paused) {
                currentAudio.play();
                btn.classList.add('playing');
                icon.className = 'fa-solid fa-pause';
            } else {
                currentAudio.pause();
                btn.classList.remove('playing');
                icon.className = 'fa-solid fa-play';
            }
            return;
        }

        if (currentAudio) {
            currentAudio.pause();
            if (currentBtn) {
                currentBtn.classList.remove('playing');
                currentBtn.querySelector('i').className = 'fa-solid fa-play';
            }
        }
        
        btn.classList.add('playing');
        icon.className = 'fa-solid fa-pause';
        
        currentAudio = new Audio(`../../../assets/activities/spelling-names/${filename}.mp3`);
        currentBtn = btn;

        const speedBtn = btn.parentElement.querySelector('.speed-btn');
        if (speedBtn) {
            currentAudio.playbackRate = parseFloat(speedBtn.dataset.speed || 1);
        }
        
        currentAudio.play().catch(e => {
            console.log('Audio not found or error playing:', e);
            btn.classList.remove('playing');
            icon.className = 'fa-solid fa-play';
            currentAudio = null;
            currentBtn = null;
        });
        
        currentAudio.onended = () => {
            btn.classList.remove('playing');
            icon.className = 'fa-solid fa-play';
            currentAudio = null;
            currentBtn = null;
        };
    }

    function toggleSpeed(btn) {
        const speeds = [1, 0.75, 0.5];
        const labels = ['1x', '0.75x', '0.5x'];
        
        let currentSpeed = parseFloat(btn.dataset.speed || 1);
        let currentIndex = speeds.indexOf(currentSpeed);
        let nextIndex = (currentIndex + 1) % speeds.length;
        
        let nextSpeed = speeds[nextIndex];
        btn.dataset.speed = nextSpeed;
        btn.textContent = labels[nextIndex];
        
        const playBtn = btn.parentElement.querySelector('.spelling-audio-btn');
        if (playBtn === currentBtn && currentAudio) {
            currentAudio.playbackRate = nextSpeed;
        }
    }

    let currentExampleAudio = null;

    function playExample(id) {
        const btn = event.currentTarget;
        
        document.querySelectorAll('.example-play-btn').forEach(b => {
            b.style.background = '';
            b.style.color = '';
        });

        btn.style.background = '#ea580c';
        btn.style.color = 'white';
        
        if (currentExampleAudio) {
            currentExampleAudio.pause();
            currentExampleAudio = null;
        }
        
        const fileMap = {
            'alex': 'ALEX',
            'emma': 'EMMA',
            'email1_example': 'alex@email.com',
            'email2_example': 'emma.smith@web.net'
        };

        const filename = fileMap[id] || id;
        const audioPath = `../../../assets/activities/spelling-names/${filename}.mp3`;
        
        currentExampleAudio = new Audio(audioPath);
        
        currentExampleAudio.play().catch(e => {
            console.log('Audio not found:', audioPath);
            btn.style.background = '';
            btn.style.color = '';
        });
        
        currentExampleAudio.onended = () => {
            btn.style.background = '';
            btn.style.color = '';
        };
    }
    </script>
</body>
</html> btn.style.color = 'white';
        
        if (currentExampleAudio) {
            currentExampleAudio.pause();
            currentExampleAudio = null;
        }
        
        const fileMap = {
            'alex': 'ALEX',
            'emma': 'EMMA',
            'email1_example': 'alex@email.com',
            'email2_example': 'emma.smith@web.net'
        };

        const filename = fileMap[id] || id;
        const audioPath = `../../../assets/activities/spelling-names/${filename}.mp3`;
        
        currentExampleAudio = new Audio(audioPath);
        
        currentExampleAudio.play().catch(e => {
            console.log('Audio not found:', audioPath);
            btn.style.background = '';
            btn.style.color = '';
        });
        
        currentExampleAudio.onended = () => {
            btn.style.background = '';
            btn.style.color = '';
        };
    }
    </script>
</body>
</html>